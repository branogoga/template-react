{"version":3,"file":"intl-relativetimeformat.min.js","sources":["../types.mjs","../core.mjs","../index.mjs","../en.mjs"],"sourcesContent":["export var VALID_UNITS = [\n    'second',\n    'minute',\n    'hour',\n    'day',\n    'week',\n    'month',\n    'quarter',\n    'year',\n    'seconds',\n    'minutes',\n    'hours',\n    'days',\n    'weeks',\n    'months',\n    'quarters',\n    'years'\n];\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { VALID_UNITS } from './types';\n/**\n * Find the correct field data in our CLDR data\n * @param locale locale\n */\nfunction findFields(locale) {\n    var localeData = RelativeTimeFormat.__localeData__;\n    var data = localeData[locale.toLowerCase()];\n    // The locale data is de-duplicated, so we have to traverse the locale's\n    // hierarchy until we find `fields` to return.\n    while (data) {\n        if (data.fields) {\n            return data.fields;\n        }\n        data = data.parentLocale\n            ? localeData[data.parentLocale.toLowerCase()]\n            : undefined;\n    }\n    throw new Error(\"Locale data added to RelativeTimeFormat is missing 'fields' for \\\"\" + locale + \"\\\"\");\n}\nfunction resolveLocale(locales) {\n    var resolvedLocales = (Array.isArray(locales) ? locales : [locales]).concat([\n        // default locale\n        DEFAULT_LOCALE\n    ]).filter(function (s) { return typeof s === 'string'; });\n    var localeData = RelativeTimeFormat.__localeData__;\n    var i, len, localeParts, data;\n    // Using the set of locales + the default locale, we look for the first one\n    // which that has been registered. When data does not exist for a locale, we\n    // traverse its ancestors to find something that's been registered within\n    // its hierarchy of locales. Since we lack the proper `parentLocale` data\n    // here, we must take a naive approach to traversal.\n    for (i = 0, len = resolvedLocales.length; i < len; i += 1) {\n        localeParts = resolvedLocales[i].toLowerCase().split('-');\n        while (localeParts.length) {\n            data = localeData[localeParts.join('-')];\n            if (data) {\n                // Return the normalized locale string; e.g., we return \"en-US\",\n                // instead of \"en-us\".\n                return data.locale;\n            }\n            localeParts.pop();\n        }\n    }\n    var defaultLocale = resolvedLocales.pop();\n    throw new Error('No locale data has been added to IntlRelativeTimeFormat for: ' +\n        resolvedLocales.join(', ') +\n        ', or the default locale: ' +\n        defaultLocale);\n}\nfunction findFieldData(fields, unit, style) {\n    if (style == 'long') {\n        return fields[unit];\n    }\n    if (style == 'narrow') {\n        return (fields[unit + \"-narrow\"] ||\n            fields[unit + \"-short\"]);\n    }\n    return fields[unit + \"-short\"];\n}\nfunction objectIs(x, y) {\n    if (Object.is) {\n        return Object.is(x, y);\n    }\n    // SameValue algorithm\n    if (x === y) {\n        // Steps 1-5, 7-10\n        // Steps 6.b-6.e: +0 != -0\n        return x !== 0 || 1 / x === 1 / y;\n    }\n    // Step 6.a: NaN == NaN\n    return x !== x && y !== y;\n}\nfunction resolvePastOrFuture(value) {\n    return objectIs(value, -0)\n        ? 'past'\n        : objectIs(value, +0)\n            ? 'future'\n            : value < 0\n                ? 'past'\n                : 'future';\n}\nfunction validateInstance(instance, method) {\n    if (!(instance instanceof RelativeTimeFormat)) {\n        throw new TypeError(\"Method Intl.RelativeTimeFormat.prototype.\" + method + \" called on incompatible receiver \" + String(instance));\n    }\n}\nfunction validateUnit(unit) {\n    // `unit + ''` to guard against `Symbol()`\n    if (!~VALID_UNITS.indexOf(unit + '')) {\n        throw new RangeError(\"Invalid unit argument for format() '\" + String(unit) + \"'\");\n    }\n    var resolvedUnit = (unit[unit.length - 1] === 's'\n        ? unit.slice(0, unit.length - 1)\n        : unit);\n    return resolvedUnit;\n}\nfunction validateValue(value, method) {\n    if (method === void 0) { method = 'format'; }\n    var parsedValue = typeof value === 'string' ? new Number(value).valueOf() : value;\n    if (!isFinite(parsedValue)) {\n        throw new RangeError(\"Value need to be finite number for Intl.RelativeTimeFormat.prototype.\" + method + \"()\");\n    }\n    return parsedValue;\n}\nfunction isString(s) {\n    return !!s;\n}\nfunction toObject(arg) {\n    if (arg == null) {\n        throw new TypeError('undefined/null cannot be converted to object');\n    }\n    return Object(arg);\n}\n/**\n * https://tc39.es/ecma402/#sec-getoption\n * @param opts\n * @param prop\n * @param type\n * @param values\n * @param fallback\n */\nfunction getOption(opts, prop, type, values, fallback) {\n    // const descriptor = Object.getOwnPropertyDescriptor(opts, prop);\n    var value = opts[prop];\n    if (value !== undefined) {\n        if (type !== 'boolean' && type !== 'string') {\n            throw new TypeError('invalid type');\n        }\n        if (type === 'boolean') {\n            value = new Boolean(value);\n        }\n        if (type === 'string') {\n            value = new String(value);\n        }\n        if (values !== undefined && !values.filter(function (val) { return val == value; }).length) {\n            throw new RangeError(value + \" in not within \" + values);\n        }\n        return value;\n    }\n    return fallback;\n}\nfunction intersection(arr1, arr2) {\n    return arr1.filter(function (s) { return ~arr2.indexOf(s); });\n}\nvar DEFAULT_LOCALE = new Intl.NumberFormat().resolvedOptions().locale;\nvar RelativeTimeFormat = /** @class */ (function () {\n    function RelativeTimeFormat() {\n        var _a = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _a[_i] = arguments[_i];\n        }\n        var locales = _a[0], options = _a[1];\n        // test262/test/intl402/RelativeTimeFormat/constructor/constructor/newtarget-undefined.js\n        // Cannot use `new.target` bc of IE11 & TS transpiles it to something else\n        var newTarget = this && this instanceof RelativeTimeFormat ? this.constructor : void 0;\n        if (!newTarget) {\n            throw new TypeError(\"Intl.RelativeTimeFormat must be called with 'new'\");\n        }\n        var opts = options === undefined ? Object.create(null) : toObject(options);\n        if (locales === undefined) {\n            this._locale = DEFAULT_LOCALE;\n        }\n        else {\n            this._locale = resolveLocale(intersection(Intl.NumberFormat.supportedLocalesOf(locales), Intl.PluralRules.supportedLocalesOf(locales)));\n        }\n        this._localeMatcher = getOption(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n        this._style = getOption(opts, 'style', 'string', ['long', 'narrow', 'short'], 'long');\n        this._numeric = getOption(opts, 'numeric', 'string', ['always', 'auto'], 'always');\n        this._fields = findFields(this._locale);\n        this._nf = new Intl.NumberFormat(this._locale);\n        this._pl = new Intl.PluralRules(this._locale);\n        this._numberingSystem = this._nf.resolvedOptions().numberingSystem;\n    }\n    RelativeTimeFormat.prototype.format = function (value, unit) {\n        validateInstance(this, 'format');\n        var resolvedUnit = validateUnit(unit);\n        var parsedValue = validateValue(value);\n        var _a = this, style = _a._style, numeric = _a._numeric;\n        var fieldData = findFieldData(this._fields, resolvedUnit, style);\n        if (!fieldData) {\n            throw new Error(\"Unsupported unit \" + unit);\n        }\n        var relative = fieldData.relative, relativeTime = fieldData.relativeTime;\n        var result = '';\n        // We got a match for things like yesterday\n        if (numeric == 'auto' &&\n            (result = relative[String(parsedValue)] || '')) {\n            return result;\n        }\n        var selector = this._pl.select(parsedValue);\n        var futureOrPastData = relativeTime[resolvePastOrFuture(parsedValue)];\n        var msg = futureOrPastData[selector] || futureOrPastData.other;\n        return msg.replace(/\\{0\\}/, this._nf.format(Math.abs(parsedValue)));\n    };\n    RelativeTimeFormat.prototype.formatToParts = function (value, unit) {\n        validateInstance(this, 'format');\n        var resolvedUnit = validateUnit(unit);\n        var parsedValue = validateValue(value, 'formatToParts');\n        var _a = this, style = _a._style, numeric = _a._numeric;\n        var fieldData = findFieldData(this._fields, resolvedUnit, style);\n        if (!fieldData) {\n            throw new Error(\"Unsupported unit \" + unit);\n        }\n        var relative = fieldData.relative, relativeTime = fieldData.relativeTime;\n        var result = '';\n        // We got a match for things like yesterday\n        if (numeric == 'auto' &&\n            (result = relative[String(parsedValue)] || '')) {\n            return [\n                {\n                    type: 'literal',\n                    value: result\n                }\n            ];\n        }\n        var selector = this._pl.select(parsedValue);\n        var futureOrPastData = relativeTime[resolvePastOrFuture(parsedValue)];\n        var msg = futureOrPastData[selector] || futureOrPastData.other;\n        var valueParts = this._nf\n            .formatToParts(Math.abs(parsedValue))\n            .map(function (p) { return (__assign({}, p, { unit: resolvedUnit })); });\n        return msg\n            .split(/(\\{0\\})/)\n            .filter(isString)\n            .reduce(function (parts, str) { return parts.concat((str === '{0}'\n            ? valueParts\n            : [{ type: 'literal', value: str }])); }, []);\n    };\n    RelativeTimeFormat.prototype.resolvedOptions = function () {\n        validateInstance(this, 'resolvedOptions');\n        // test262/test/intl402/RelativeTimeFormat/prototype/resolvedOptions/type.js\n        var opts = Object.create(Object.prototype);\n        Object.defineProperties(opts, {\n            locale: {\n                value: this._locale,\n                writable: true,\n                enumerable: true,\n                configurable: true\n            },\n            style: {\n                value: this._style.valueOf(),\n                writable: true,\n                enumerable: true,\n                configurable: true\n            },\n            numeric: {\n                value: this._numeric.valueOf(),\n                writable: true,\n                enumerable: true,\n                configurable: true\n            },\n            numberingSystem: {\n                value: this._numberingSystem.valueOf(),\n                writable: true,\n                enumerable: true,\n                configurable: true\n            }\n        });\n        return opts;\n    };\n    RelativeTimeFormat.prototype.toString = function () {\n        return '[object Intl.RelativeTimeFormat]';\n    };\n    RelativeTimeFormat.__addLocaleData = function () {\n        var data = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            data[_i] = arguments[_i];\n        }\n        for (var _a = 0, data_1 = data; _a < data_1.length; _a++) {\n            var datum = data_1[_a];\n            if (!(datum && datum.locale)) {\n                throw new Error('Locale data provided to RelativeTimeFormat is missing a ' +\n                    '`locale` property value');\n            }\n            RelativeTimeFormat.__localeData__[datum.locale.toLowerCase()] = datum;\n        }\n    };\n    RelativeTimeFormat.supportedLocalesOf = function (locales) {\n        var _a = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            _a[_i - 1] = arguments[_i];\n        }\n        var opts = _a[0];\n        // test262/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/options-toobject.js\n        var localeMatcher = 'best fit';\n        // test262/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/options-null.js\n        if (opts === null) {\n            throw new TypeError('opts cannot be null');\n        }\n        if (opts) {\n            localeMatcher = getOption(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n        }\n        // test262/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/result-type.js\n        return intersection(Intl.NumberFormat.supportedLocalesOf(locales, { localeMatcher: localeMatcher }), Intl.PluralRules.supportedLocalesOf(locales, { localeMatcher: localeMatcher })).slice();\n    };\n    RelativeTimeFormat.__localeData__ = {};\n    RelativeTimeFormat.polyfilled = true;\n    return RelativeTimeFormat;\n}());\nexport default RelativeTimeFormat;\n","import IntlRelativeTimeFormat from './core';\nimport defaultLocale from './en';\nIntlRelativeTimeFormat.__addLocaleData(defaultLocale);\nexport * from './core';\nexport * from './types';\nexport default IntlRelativeTimeFormat;\n","/* @generated */\n// prettier-ignore  \nexport default { \"locale\": \"en\", \"fields\": { \"year\": { \"displayName\": \"year\", \"relative\": { \"0\": \"this year\", \"1\": \"next year\", \"-1\": \"last year\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} year\", \"other\": \"in {0} years\" }, \"past\": { \"one\": \"{0} year ago\", \"other\": \"{0} years ago\" } } }, \"year-short\": { \"displayName\": \"yr.\", \"relative\": { \"0\": \"this yr.\", \"1\": \"next yr.\", \"-1\": \"last yr.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} yr.\", \"other\": \"in {0} yr.\" }, \"past\": { \"one\": \"{0} yr. ago\", \"other\": \"{0} yr. ago\" } } }, \"year-narrow\": { \"displayName\": \"yr.\", \"relative\": { \"0\": \"this yr.\", \"1\": \"next yr.\", \"-1\": \"last yr.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} yr.\", \"other\": \"in {0} yr.\" }, \"past\": { \"one\": \"{0} yr. ago\", \"other\": \"{0} yr. ago\" } } }, \"quarter\": { \"displayName\": \"quarter\", \"relative\": { \"0\": \"this quarter\", \"1\": \"next quarter\", \"-1\": \"last quarter\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} quarter\", \"other\": \"in {0} quarters\" }, \"past\": { \"one\": \"{0} quarter ago\", \"other\": \"{0} quarters ago\" } } }, \"quarter-short\": { \"displayName\": \"qtr.\", \"relative\": { \"0\": \"this qtr.\", \"1\": \"next qtr.\", \"-1\": \"last qtr.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} qtr.\", \"other\": \"in {0} qtrs.\" }, \"past\": { \"one\": \"{0} qtr. ago\", \"other\": \"{0} qtrs. ago\" } } }, \"quarter-narrow\": { \"displayName\": \"qtr.\", \"relative\": { \"0\": \"this qtr.\", \"1\": \"next qtr.\", \"-1\": \"last qtr.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} qtr.\", \"other\": \"in {0} qtrs.\" }, \"past\": { \"one\": \"{0} qtr. ago\", \"other\": \"{0} qtrs. ago\" } } }, \"month\": { \"displayName\": \"month\", \"relative\": { \"0\": \"this month\", \"1\": \"next month\", \"-1\": \"last month\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} month\", \"other\": \"in {0} months\" }, \"past\": { \"one\": \"{0} month ago\", \"other\": \"{0} months ago\" } } }, \"month-short\": { \"displayName\": \"mo.\", \"relative\": { \"0\": \"this mo.\", \"1\": \"next mo.\", \"-1\": \"last mo.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} mo.\", \"other\": \"in {0} mo.\" }, \"past\": { \"one\": \"{0} mo. ago\", \"other\": \"{0} mo. ago\" } } }, \"month-narrow\": { \"displayName\": \"mo.\", \"relative\": { \"0\": \"this mo.\", \"1\": \"next mo.\", \"-1\": \"last mo.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} mo.\", \"other\": \"in {0} mo.\" }, \"past\": { \"one\": \"{0} mo. ago\", \"other\": \"{0} mo. ago\" } } }, \"week\": { \"displayName\": \"week\", \"relative\": { \"0\": \"this week\", \"1\": \"next week\", \"-1\": \"last week\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} week\", \"other\": \"in {0} weeks\" }, \"past\": { \"one\": \"{0} week ago\", \"other\": \"{0} weeks ago\" } }, \"relativePeriod\": \"the week of {0}\" }, \"week-short\": { \"displayName\": \"wk.\", \"relative\": { \"0\": \"this wk.\", \"1\": \"next wk.\", \"-1\": \"last wk.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} wk.\", \"other\": \"in {0} wk.\" }, \"past\": { \"one\": \"{0} wk. ago\", \"other\": \"{0} wk. ago\" } }, \"relativePeriod\": \"the week of {0}\" }, \"week-narrow\": { \"displayName\": \"wk.\", \"relative\": { \"0\": \"this wk.\", \"1\": \"next wk.\", \"-1\": \"last wk.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} wk.\", \"other\": \"in {0} wk.\" }, \"past\": { \"one\": \"{0} wk. ago\", \"other\": \"{0} wk. ago\" } }, \"relativePeriod\": \"the week of {0}\" }, \"day\": { \"displayName\": \"day\", \"relative\": { \"0\": \"today\", \"1\": \"tomorrow\", \"-1\": \"yesterday\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} day\", \"other\": \"in {0} days\" }, \"past\": { \"one\": \"{0} day ago\", \"other\": \"{0} days ago\" } } }, \"day-short\": { \"displayName\": \"day\", \"relative\": { \"0\": \"today\", \"1\": \"tomorrow\", \"-1\": \"yesterday\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} day\", \"other\": \"in {0} days\" }, \"past\": { \"one\": \"{0} day ago\", \"other\": \"{0} days ago\" } } }, \"day-narrow\": { \"displayName\": \"day\", \"relative\": { \"0\": \"today\", \"1\": \"tomorrow\", \"-1\": \"yesterday\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} day\", \"other\": \"in {0} days\" }, \"past\": { \"one\": \"{0} day ago\", \"other\": \"{0} days ago\" } } }, \"hour\": { \"displayName\": \"hour\", \"relative\": { \"0\": \"this hour\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} hour\", \"other\": \"in {0} hours\" }, \"past\": { \"one\": \"{0} hour ago\", \"other\": \"{0} hours ago\" } } }, \"hour-short\": { \"displayName\": \"hr.\", \"relative\": { \"0\": \"this hour\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} hr.\", \"other\": \"in {0} hr.\" }, \"past\": { \"one\": \"{0} hr. ago\", \"other\": \"{0} hr. ago\" } } }, \"hour-narrow\": { \"displayName\": \"hr.\", \"relative\": { \"0\": \"this hour\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} hr.\", \"other\": \"in {0} hr.\" }, \"past\": { \"one\": \"{0} hr. ago\", \"other\": \"{0} hr. ago\" } } }, \"minute\": { \"displayName\": \"minute\", \"relative\": { \"0\": \"this minute\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} minute\", \"other\": \"in {0} minutes\" }, \"past\": { \"one\": \"{0} minute ago\", \"other\": \"{0} minutes ago\" } } }, \"minute-short\": { \"displayName\": \"min.\", \"relative\": { \"0\": \"this minute\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} min.\", \"other\": \"in {0} min.\" }, \"past\": { \"one\": \"{0} min. ago\", \"other\": \"{0} min. ago\" } } }, \"minute-narrow\": { \"displayName\": \"min.\", \"relative\": { \"0\": \"this minute\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} min.\", \"other\": \"in {0} min.\" }, \"past\": { \"one\": \"{0} min. ago\", \"other\": \"{0} min. ago\" } } }, \"second\": { \"displayName\": \"second\", \"relative\": { \"0\": \"now\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} second\", \"other\": \"in {0} seconds\" }, \"past\": { \"one\": \"{0} second ago\", \"other\": \"{0} seconds ago\" } } }, \"second-short\": { \"displayName\": \"sec.\", \"relative\": { \"0\": \"now\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} sec.\", \"other\": \"in {0} sec.\" }, \"past\": { \"one\": \"{0} sec. ago\", \"other\": \"{0} sec. ago\" } } }, \"second-narrow\": { \"displayName\": \"sec.\", \"relative\": { \"0\": \"now\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} sec.\", \"other\": \"in {0} sec.\" }, \"past\": { \"one\": \"{0} sec. ago\", \"other\": \"{0} sec. ago\" } } } } };\n"],"names":["VALID_UNITS","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","findFieldData","fields","unit","style","objectIs","x","y","is","resolvePastOrFuture","value","validateInstance","instance","method","RelativeTimeFormat","TypeError","String","validateUnit","indexOf","RangeError","slice","validateValue","parsedValue","Number","valueOf","isFinite","isString","getOption","opts","prop","type","values","fallback","undefined","Boolean","filter","val","intersection","arr1","arr2","DEFAULT_LOCALE","Intl","NumberFormat","resolvedOptions","locale","format","resolvedUnit","_style","numeric","_numeric","fieldData","_fields","Error","relative","relativeTime","result","selector","_pl","select","futureOrPastData","other","replace","_nf","Math","abs","formatToParts","msg","valueParts","map","split","reduce","parts","str","concat","create","defineProperties","_locale","writable","enumerable","configurable","numberingSystem","_numberingSystem","toString","__addLocaleData","data","_i","_a","data_1","datum","__localeData__","toLowerCase","supportedLocalesOf","locales","localeMatcher","PluralRules","polyfilled","options","constructor","arg","toObject","len","localeParts","resolvedLocales","Array","isArray","localeData","join","pop","defaultLocale","resolveLocale","_localeMatcher","parentLocale","findFields","year","displayName","0","1","-1","future","one","past","year-short","year-narrow","quarter","quarter-short","quarter-narrow","month","month-short","month-narrow","week","relativePeriod","week-short","week-narrow","day","day-short","day-narrow","hour","hour-short","hour-narrow","minute","minute-short","minute-narrow","second","second-short","second-narrow"],"mappings":"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"}